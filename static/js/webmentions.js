function getCommentText(e,t,a,n){if("link"==t&&n.data.name)return'<a class="u-url name p-name" href="'+a+'">'+n.data.name+"</a>";if(e)return e;var i=new URL(a).hostname;return"like"==t?"twitter.com"==i?"favorited this.":"facebook.com"==i?"likes this.":"plus.google.com"==i?"+1ed this.":"liked this.":"repost"==t?"twitter.com"==i?"retweeted this.":"reposted this.":t+"ed it"}function countActivityTypes(e){for(var t={},a=0;a<e.length;a++){var n=e[a].activity.type;t[n]=t[n]?t[n]+1:1}return t}function buildSummaryResponse(e,t){var a="";return e[t]>0&&(a='<span class="response-summary">      <svg class="icon"><use xlink:href="#'+t+'" /></svg>&nbsp;&nbsp;'+e[t]+"     </span>"),a}function getIconForDomain(e){var t="";switch(e){case"twitter.com":t='<svg class="icon"><use xlink:href="#twitter" /></svg>';break;case"instagram.com":t='<svg class="icon"><use xlink:href="#instagram" /></svg>';break;case"flickr.com":t='<svg class="icon"><use xlink:href="#flickr" /></svg>';break;default:t=e}return t}function displayMentions(e){if(e&&e.links){var t=countActivityTypes(e.links),a="";a+=buildSummaryResponse(t,"like"),a+=buildSummaryResponse(t,"repost"),a+="",e.links.forEach(function(e){"like"==e.activity.type||e.activity.type;var t=e.data.published?new Date(e.data.published):new Date(e.verified_date),a='<li class="comment p-comment h-entry" id="li-comment-'+e.id+'">           <article id="comment-'+e.id+'" class="webmention-mention">             <div class="comment-meta commentmetadata webmention-author">               <div class="vcard h-card p-author">               <span class="webmention-author"><img alt="" src="'+e.data.author.photo+'" srcset="'+e.data.author.photo+' 2x" class="u-photo avatar avatar-48 photo avatar-default u-photo avatar-semantic-linkbacks" height="48" width="48" scale="0"></span>                 <cite class="fn"><a href="'+e.data.author.url+'" rel="external nofollow" class="u-url url">'+e.data.author.name+'</a></cite>                 <a href="'+e.target+"#comment-"+e.id+'" title="'+t.toLocaleTimeString()+'">                   <time class="dt-published" datetime="'+e.data.published+'">'+t.toLocaleDateString()+'</time>                 </a>               </div>             </div>             <div class="comment-content">               <div class="e-content p-name p-summary">                 <p>'+getCommentText(e.data.content,e.activity.type,e.data.url,e)+'                <cite><a class="u-url" href="'+e.data.url+'" rel="nofollow noopener">via '+getIconForDomain(new URL(e.data.url).hostname)+"</a></cite></p>               </div>             </div>           </article>         </li>";document.getElementById("mentionList").insertAdjacentHTML("afterbegin",a)}),document.getElementById("summaryResponses").insertAdjacentHTML("afterbegin",a),e.links.length&&(document.getElementById("mentionContainer").style.visibility="visible",document.getElementById("mentionContainer").style.display="block")}}!function(){var e,t=document.createElement("script"),a=document.getElementsByTagName("script")[0];e=!(!(e=!!document.querySelectorAll&&document.querySelectorAll("link[rel~=canonical]"))||!e[0])&&e[0].href,t.type="text/javascript",t.defer=!0,t.src="https://webmention.io/api/mentions?jsonp=displayMentions&target="+encodeURIComponent(e),a.parentNode.insertBefore(t,a)}();