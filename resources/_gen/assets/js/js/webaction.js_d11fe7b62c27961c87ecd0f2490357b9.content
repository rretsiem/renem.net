(function(){'use strict';var loadingClassRegexp=/(^|\s)indieconfig-loading(\s|$)/;var doTheAction=function(indieConfig){var href,action,anchors;this.className=this.className.replace(loadingClassRegexp,' ');action=this.getAttribute('do');if((action==='reply'||action==='post')&&indieConfig.reply){href=indieConfig.reply;}else if(action==='like'&&indieConfig.like){href=indieConfig.like;}else if(action==='repost'&&indieConfig.repost){href=indieConfig.repost;}else if(action==='tip'&&indieConfig.tip){href=indieConfig.tip;}
if(!href){anchors=this.getElementsByTagName('a');if(anchors[0]){href=anchors[0].href;}}
if(href){var target=document.createElement('a');target.href=this.getAttribute('with');target=target.href;href=href.replace('{url}',encodeURIComponent(target||window.location.href));window.location=href;}};var handleTheAction=function(e){e.preventDefault();if(window.loadIndieConfig&&!loadingClassRegexp.test(this.className)){this.className+=' indieconfig-loading';window.loadIndieConfig(doTheAction.bind(this));}};var activateWebActionElements=function(context){var actions=context.querySelectorAll('indie-action'),i,length=actions.length;for(i=0;i<length;i++){actions[i].addEventListener('click',handleTheAction);}};window.activateWebActionElements=activateWebActionElements;if(document.body){activateWebActionElements(document);}else{window.addEventListener('DOMContentLoaded',function(){activateWebActionElements(document);});}}());