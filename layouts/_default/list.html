<!--{{ $paginator := .Paginate (where .Data.Pages "Section" "post") }}-->
{{ $paginator := .Paginate (where .Pages "Type" "post") }}
<!DOCTYPE html>
{{ `<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->` | safeHTML }}
{{ `<!--[if IE 7]><html class="no-js lt-ie9 lt-ie8"> <![endif]-->` | safeHTML }}
{{ `<!--[if IE 8]><html class="no-js lt-ie9"> <![endif]-->` | safeHTML }}
{{ `<!--[if gt IE 8]><!-->` | safeHTML }}<html class="no-js" prefix="og: http://ogp.me/ns#" xmlns:og="http://ogp.me/ns#">{{ `<!--<![endif]-->` | safeHTML }}

{{ partial "head.html" . }}
<body {{ if .IsHome}}class="h-feed"{{ end }}>
{{ `<!--[if lt IE 7]><p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chrome/â€Ž">install Google Chrome</a> to experience this site.</p><![endif]-->` | safeHTML }}

{{ partial "header.html" . }}
<main class="content" role="main">
	{{ if .IsHome }}
	<span class="p-name" style="display: none;">{{ .Site.Title }}</span>
	<h1 class="p-name" style="display: none;">{{ .Site.Title }}</h1>
	{{ end }}
	<div class="container">
	{{ range $paginator.Pages }}
		{{ .Render "li" }}

	{{ end }}
	{{ partial "pagination.html" . }}
	</div>
</main>
{{ partial "footer.html" . }}
{{ partial "google_analytics.html" . }}

<script async type='text/javascript' src="{{ .Site.BaseURL }}js/service-worker-registration.js"></script>
    <script type='text/javascript'>
      function sendMessage(message) {
        return new Promise(function(resolve, reject) {
          if (navigator.serviceWorker.controller) {
            var messageChannel = new MessageChannel();
            messageChannel.port1.onmessage = function (event) {
              if (event.data.error) {
                reject(event.data.error);
              } else {
                resolve(event.data);
              }
            };
            navigator.serviceWorker.controller.postMessage(message, [messageChannel.port2]);
          } else {
            reject("This page isn't currently controlled by a service worker. Please reload and try again.");
          }
        });
      }
    </script>
</body>
</html>
